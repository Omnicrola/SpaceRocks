!function e(t,n,i){function r(o,a){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return r(n?n:e)},f,f.exports,e,t,n,i)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){(function(t,i,r,s,o,a,u,f,l){function r(e,t,n){if(!(this instanceof r))return new r(e,t,n);var i=typeof e;if("base64"===t&&"string"===i)for(e=F(e);e.length%4!==0;)e+="=";var s;if("number"===i)s=k(e);else if("string"===i)s=r.byteLength(e,t);else{if("object"!==i)throw new Error("First argument needs to be a number, array or string.");s=k(e.length)}var o;r._useTypedArrays?o=r._augment(new Uint8Array(s)):(o=this,o.length=s,o._isBuffer=!0);var a;if(r._useTypedArrays&&"number"==typeof e.byteLength)o._set(e);else if(N(e))for(a=0;a<s;a++)r.isBuffer(e)?o[a]=e.readUInt8(a):o[a]=e[a];else if("string"===i)o.write(e,0,t);else if("number"===i&&!r._useTypedArrays&&!n)for(a=0;a<s;a++)o[a]=0;return o}function c(e,t,n,i){n=Number(n)||0;var s=e.length-n;i?(i=Number(i),i>s&&(i=s)):i=s;var o=t.length;K(o%2===0,"Invalid hex string"),i>o/2&&(i=o/2);for(var a=0;a<i;a++){var u=parseInt(t.substr(2*a,2),16);K(!isNaN(u),"Invalid hex string"),e[n+a]=u}return r._charsWritten=2*a,a}function d(e,t,n,i){var s=r._charsWritten=q(G(t),e,n,i);return s}function h(e,t,n,i){var s=r._charsWritten=q(R(t),e,n,i);return s}function p(e,t,n,i){return h(e,t,n,i)}function y(e,t,n,i){var s=r._charsWritten=q(W(t),e,n,i);return s}function w(e,t,n,i){var s=r._charsWritten=q(H(t),e,n,i);return s}function m(e,t,n){return 0===t&&n===e.length?Q.fromByteArray(e):Q.fromByteArray(e.slice(t,n))}function b(e,t,n){var i="",r="";n=Math.min(e.length,n);for(var s=t;s<n;s++)e[s]<=127?(i+=z(r)+String.fromCharCode(e[s]),r=""):r+="%"+e[s].toString(16);return i+z(r)}function g(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;r++)i+=String.fromCharCode(e[r]);return i}function v(e,t,n){return g(e,t,n)}function E(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var r="",s=t;s<n;s++)r+=O(e[s]);return r}function _(e,t,n){for(var i=e.slice(t,n),r="",s=0;s<i.length;s+=2)r+=String.fromCharCode(i[s]+256*i[s+1]);return r}function C(e,t,n,i){i||(K("boolean"==typeof n,"missing or invalid endian"),K(void 0!==t&&null!==t,"missing offset"),K(t+1<e.length,"Trying to read beyond buffer length"));var r=e.length;if(!(t>=r)){var s;return n?(s=e[t],t+1<r&&(s|=e[t+1]<<8)):(s=e[t]<<8,t+1<r&&(s|=e[t+1])),s}}function x(e,t,n,i){i||(K("boolean"==typeof n,"missing or invalid endian"),K(void 0!==t&&null!==t,"missing offset"),K(t+3<e.length,"Trying to read beyond buffer length"));var r=e.length;if(!(t>=r)){var s;return n?(t+2<r&&(s=e[t+2]<<16),t+1<r&&(s|=e[t+1]<<8),s|=e[t],t+3<r&&(s+=e[t+3]<<24>>>0)):(t+1<r&&(s=e[t+1]<<16),t+2<r&&(s|=e[t+2]<<8),t+3<r&&(s|=e[t+3]),s+=e[t]<<24>>>0),s}}function S(e,t,n,i){i||(K("boolean"==typeof n,"missing or invalid endian"),K(void 0!==t&&null!==t,"missing offset"),K(t+1<e.length,"Trying to read beyond buffer length"));var r=e.length;if(!(t>=r)){var s=C(e,t,n,!0),o=32768&s;return o?(65535-s+1)*-1:s}}function B(e,t,n,i){i||(K("boolean"==typeof n,"missing or invalid endian"),K(void 0!==t&&null!==t,"missing offset"),K(t+3<e.length,"Trying to read beyond buffer length"));var r=e.length;if(!(t>=r)){var s=x(e,t,n,!0),o=2147483648&s;return o?(4294967295-s+1)*-1:s}}function A(e,t,n,i){return i||(K("boolean"==typeof n,"missing or invalid endian"),K(t+3<e.length,"Trying to read beyond buffer length")),Z.read(e,t,n,23,4)}function I(e,t,n,i){return i||(K("boolean"==typeof n,"missing or invalid endian"),K(t+7<e.length,"Trying to read beyond buffer length")),Z.read(e,t,n,52,8)}function L(e,t,n,i,r){r||(K(void 0!==t&&null!==t,"missing value"),K("boolean"==typeof i,"missing or invalid endian"),K(void 0!==n&&null!==n,"missing offset"),K(n+1<e.length,"trying to write beyond buffer length"),X(t,65535));var s=e.length;if(!(n>=s))for(var o=0,a=Math.min(s-n,2);o<a;o++)e[n+o]=(t&255<<8*(i?o:1-o))>>>8*(i?o:1-o)}function M(e,t,n,i,r){r||(K(void 0!==t&&null!==t,"missing value"),K("boolean"==typeof i,"missing or invalid endian"),K(void 0!==n&&null!==n,"missing offset"),K(n+3<e.length,"trying to write beyond buffer length"),X(t,4294967295));var s=e.length;if(!(n>=s))for(var o=0,a=Math.min(s-n,4);o<a;o++)e[n+o]=t>>>8*(i?o:3-o)&255}function P(e,t,n,i,r){r||(K(void 0!==t&&null!==t,"missing value"),K("boolean"==typeof i,"missing or invalid endian"),K(void 0!==n&&null!==n,"missing offset"),K(n+1<e.length,"Trying to write beyond buffer length"),J(t,32767,-32768));var s=e.length;n>=s||(t>=0?L(e,t,n,i,r):L(e,65535+t+1,n,i,r))}function T(e,t,n,i,r){r||(K(void 0!==t&&null!==t,"missing value"),K("boolean"==typeof i,"missing or invalid endian"),K(void 0!==n&&null!==n,"missing offset"),K(n+3<e.length,"Trying to write beyond buffer length"),J(t,2147483647,-2147483648));var s=e.length;n>=s||(t>=0?M(e,t,n,i,r):M(e,4294967295+t+1,n,i,r))}function V(e,t,n,i,r){r||(K(void 0!==t&&null!==t,"missing value"),K("boolean"==typeof i,"missing or invalid endian"),K(void 0!==n&&null!==n,"missing offset"),K(n+3<e.length,"Trying to write beyond buffer length"),Y(t,3.4028234663852886e38,-3.4028234663852886e38));var s=e.length;n>=s||Z.write(e,t,n,i,23,4)}function U(e,t,n,i,r){r||(K(void 0!==t&&null!==t,"missing value"),K("boolean"==typeof i,"missing or invalid endian"),K(void 0!==n&&null!==n,"missing offset"),K(n+7<e.length,"Trying to write beyond buffer length"),Y(t,1.7976931348623157e308,-1.7976931348623157e308));var s=e.length;n>=s||Z.write(e,t,n,i,52,8)}function F(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function j(e,t,n){return"number"!=typeof e?n:(e=~~e,e>=t?t:e>=0?e:(e+=t,e>=0?e:0))}function k(e){return e=~~Math.ceil(+e),e<0?0:e}function D(e){return(Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)})(e)}function N(e){return D(e)||r.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function O(e){return e<16?"0"+e.toString(16):e.toString(16)}function G(e){for(var t=[],n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i<=127)t.push(e.charCodeAt(n));else{var r=n;i>=55296&&i<=57343&&n++;for(var s=encodeURIComponent(e.slice(r,n+1)).substr(1).split("%"),o=0;o<s.length;o++)t.push(parseInt(s[o],16))}}return t}function R(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function H(e){for(var t,n,i,r=[],s=0;s<e.length;s++)t=e.charCodeAt(s),n=t>>8,i=t%256,r.push(i),r.push(n);return r}function W(e){return Q.toByteArray(e)}function q(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);r++)t[r+n]=e[r];return r}function z(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}function X(e,t){K("number"==typeof e,"cannot write a non-number as a number"),K(e>=0,"specified a negative value for writing an unsigned value"),K(e<=t,"value is larger than maximum value for type"),K(Math.floor(e)===e,"value has a fractional component")}function J(e,t,n){K("number"==typeof e,"cannot write a non-number as a number"),K(e<=t,"value larger than maximum allowed value"),K(e>=n,"value smaller than minimum allowed value"),K(Math.floor(e)===e,"value has a fractional component")}function Y(e,t,n){K("number"==typeof e,"cannot write a non-number as a number"),K(e<=t,"value larger than maximum allowed value"),K(e>=n,"value smaller than minimum allowed value")}function K(e,t){if(!e)throw new Error(t||"Failed assertion")}var Q=e("base64-js"),Z=e("ieee754");n.Buffer=r,n.SlowBuffer=r,n.INSPECT_MAX_BYTES=50,r.poolSize=8192,r._useTypedArrays=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray}catch(n){return!1}}(),r.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.isBuffer=function(e){return!(null===e||void 0===e||!e._isBuffer)},r.byteLength=function(e,t){var n;switch(e+="",t||"utf8"){case"hex":n=e.length/2;break;case"utf8":case"utf-8":n=G(e).length;break;case"ascii":case"binary":case"raw":n=e.length;break;case"base64":n=W(e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*e.length;break;default:throw new Error("Unknown encoding")}return n},r.concat=function(e,t){if(K(D(e),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===e.length)return new r(0);if(1===e.length)return e[0];var n;if("number"!=typeof t)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var i=new r(t),s=0;for(n=0;n<e.length;n++){var o=e[n];o.copy(i,s),s+=o.length}return i},r.prototype.write=function(e,t,n,i){if(isFinite(t))isFinite(n)||(i=n,n=void 0);else{var r=i;i=t,t=n,n=r}t=Number(t)||0;var s=this.length-t;n?(n=Number(n),n>s&&(n=s)):n=s,i=String(i||"utf8").toLowerCase();var o;switch(i){case"hex":o=c(this,e,t,n);break;case"utf8":case"utf-8":o=d(this,e,t,n);break;case"ascii":o=h(this,e,t,n);break;case"binary":o=p(this,e,t,n);break;case"base64":o=y(this,e,t,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":o=w(this,e,t,n);break;default:throw new Error("Unknown encoding")}return o},r.prototype.toString=function(e,t,n){var i=this;if(e=String(e||"utf8").toLowerCase(),t=Number(t)||0,n=void 0!==n?Number(n):n=i.length,n===t)return"";var r;switch(e){case"hex":r=E(i,t,n);break;case"utf8":case"utf-8":r=b(i,t,n);break;case"ascii":r=g(i,t,n);break;case"binary":r=v(i,t,n);break;case"base64":r=m(i,t,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=_(i,t,n);break;default:throw new Error("Unknown encoding")}return r},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.copy=function(e,t,n,i){var s=this;if(n||(n=0),i||0===i||(i=this.length),t||(t=0),i!==n&&0!==e.length&&0!==s.length){K(i>=n,"sourceEnd < sourceStart"),K(t>=0&&t<e.length,"targetStart out of bounds"),K(n>=0&&n<s.length,"sourceStart out of bounds"),K(i>=0&&i<=s.length,"sourceEnd out of bounds"),i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var o=i-n;if(o<100||!r._useTypedArrays)for(var a=0;a<o;a++)e[a+t]=this[a+n];else e._set(this.subarray(n,n+o),t)}},r.prototype.slice=function(e,t){var n=this.length;if(e=j(e,n,0),t=j(t,n,n),r._useTypedArrays)return r._augment(this.subarray(e,t));for(var i=t-e,s=new r(i,(void 0),(!0)),o=0;o<i;o++)s[o]=this[o+e];return s},r.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},r.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},r.prototype.readUInt8=function(e,t){if(t||(K(void 0!==e&&null!==e,"missing offset"),K(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length))return this[e]},r.prototype.readUInt16LE=function(e,t){return C(this,e,!0,t)},r.prototype.readUInt16BE=function(e,t){return C(this,e,!1,t)},r.prototype.readUInt32LE=function(e,t){return x(this,e,!0,t)},r.prototype.readUInt32BE=function(e,t){return x(this,e,!1,t)},r.prototype.readInt8=function(e,t){if(t||(K(void 0!==e&&null!==e,"missing offset"),K(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length)){var n=128&this[e];return n?(255-this[e]+1)*-1:this[e]}},r.prototype.readInt16LE=function(e,t){return S(this,e,!0,t)},r.prototype.readInt16BE=function(e,t){return S(this,e,!1,t)},r.prototype.readInt32LE=function(e,t){return B(this,e,!0,t)},r.prototype.readInt32BE=function(e,t){return B(this,e,!1,t)},r.prototype.readFloatLE=function(e,t){return A(this,e,!0,t)},r.prototype.readFloatBE=function(e,t){return A(this,e,!1,t)},r.prototype.readDoubleLE=function(e,t){return I(this,e,!0,t)},r.prototype.readDoubleBE=function(e,t){return I(this,e,!1,t)},r.prototype.writeUInt8=function(e,t,n){n||(K(void 0!==e&&null!==e,"missing value"),K(void 0!==t&&null!==t,"missing offset"),K(t<this.length,"trying to write beyond buffer length"),X(e,255)),t>=this.length||(this[t]=e)},r.prototype.writeUInt16LE=function(e,t,n){L(this,e,t,!0,n)},r.prototype.writeUInt16BE=function(e,t,n){L(this,e,t,!1,n)},r.prototype.writeUInt32LE=function(e,t,n){M(this,e,t,!0,n)},r.prototype.writeUInt32BE=function(e,t,n){M(this,e,t,!1,n)},r.prototype.writeInt8=function(e,t,n){n||(K(void 0!==e&&null!==e,"missing value"),K(void 0!==t&&null!==t,"missing offset"),K(t<this.length,"Trying to write beyond buffer length"),J(e,127,-128)),t>=this.length||(e>=0?this.writeUInt8(e,t,n):this.writeUInt8(255+e+1,t,n))},r.prototype.writeInt16LE=function(e,t,n){P(this,e,t,!0,n)},r.prototype.writeInt16BE=function(e,t,n){P(this,e,t,!1,n)},r.prototype.writeInt32LE=function(e,t,n){T(this,e,t,!0,n)},r.prototype.writeInt32BE=function(e,t,n){T(this,e,t,!1,n)},r.prototype.writeFloatLE=function(e,t,n){V(this,e,t,!0,n)},r.prototype.writeFloatBE=function(e,t,n){V(this,e,t,!1,n)},r.prototype.writeDoubleLE=function(e,t,n){U(this,e,t,!0,n)},r.prototype.writeDoubleBE=function(e,t,n){U(this,e,t,!1,n)},r.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),"string"==typeof e&&(e=e.charCodeAt(0)),K("number"==typeof e&&!isNaN(e),"value is not a number"),K(n>=t,"end < start"),n!==t&&0!==this.length){K(t>=0&&t<this.length,"start out of bounds"),K(n>=0&&n<=this.length,"end out of bounds");for(var i=t;i<n;i++)this[i]=e}},r.prototype.inspect=function(){for(var e=[],t=this.length,i=0;i<t;i++)if(e[i]=O(this[i]),i===n.INSPECT_MAX_BYTES){e[i+1]="...";break}return"<Buffer "+e.join(" ")+">"},r.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(r._useTypedArrays)return new r(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;t<n;t+=1)e[t]=this[t];return e.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var $=r.prototype;r._augment=function(e){return e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=$.get,e.set=$.set,e.write=$.write,e.toString=$.toString,e.toLocaleString=$.toString,e.toJSON=$.toJSON,e.copy=$.copy,e.slice=$.slice,e.readUInt8=$.readUInt8,e.readUInt16LE=$.readUInt16LE,e.readUInt16BE=$.readUInt16BE,e.readUInt32LE=$.readUInt32LE,e.readUInt32BE=$.readUInt32BE,e.readInt8=$.readInt8,e.readInt16LE=$.readInt16LE,e.readInt16BE=$.readInt16BE,e.readInt32LE=$.readInt32LE,e.readInt32BE=$.readInt32BE,e.readFloatLE=$.readFloatLE,e.readFloatBE=$.readFloatBE,e.readDoubleLE=$.readDoubleLE,e.readDoubleBE=$.readDoubleBE,e.writeUInt8=$.writeUInt8,e.writeUInt16LE=$.writeUInt16LE,e.writeUInt16BE=$.writeUInt16BE,e.writeUInt32LE=$.writeUInt32LE,e.writeUInt32BE=$.writeUInt32BE,e.writeInt8=$.writeInt8,e.writeInt16LE=$.writeInt16LE,e.writeInt16BE=$.writeInt16BE,e.writeInt32LE=$.writeInt32LE,e.writeInt32BE=$.writeInt32BE,e.writeFloatLE=$.writeFloatLE,e.writeFloatBE=$.writeFloatBE,e.writeDoubleLE=$.writeDoubleLE,e.writeDoubleBE=$.writeDoubleBE,e.fill=$.fill,e.inspect=$.inspect,e.toArrayBuffer=$.toArrayBuffer,e}}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/..\\node_modules\\gulp-browserify\\node_modules\\browserify\\node_modules\\buffer\\index.js","/..\\node_modules\\gulp-browserify\\node_modules\\browserify\\node_modules\\buffer")},{VCmEsw:4,"base64-js":2,buffer:1,ieee754:3}],2:[function(e,t,n){(function(e,t,i,r,s,o,a,u,f){var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===s||t===c?62:t===o||t===d?63:t<a?-1:t<a+10?t-a+26+26:t<f+26?t-f:t<u+26?t-u+26:void 0}function n(e){function n(e){f[c++]=e}var i,s,o,a,u,f;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=e.length;u="="===e.charAt(l-2)?2:"="===e.charAt(l-1)?1:0,f=new r(3*e.length/4-u),o=u>0?e.length-4:e.length;var c=0;for(i=0,s=0;i<o;i+=4,s+=3)a=t(e.charAt(i))<<18|t(e.charAt(i+1))<<12|t(e.charAt(i+2))<<6|t(e.charAt(i+3)),n((16711680&a)>>16),n((65280&a)>>8),n(255&a);return 2===u?(a=t(e.charAt(i))<<2|t(e.charAt(i+1))>>4,n(255&a)):1===u&&(a=t(e.charAt(i))<<10|t(e.charAt(i+1))<<4|t(e.charAt(i+2))>>2,n(a>>8&255),n(255&a)),f}function i(e){function t(e){return l.charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var i,r,s,o=e.length%3,a="";for(i=0,s=e.length-o;i<s;i+=3)r=(e[i]<<16)+(e[i+1]<<8)+e[i+2],a+=n(r);switch(o){case 1:r=e[e.length-1],a+=t(r>>2),a+=t(r<<4&63),a+="==";break;case 2:r=(e[e.length-2]<<8)+e[e.length-1],a+=t(r>>10),a+=t(r>>4&63),a+=t(r<<2&63),a+="="}return a}var r="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),o="/".charCodeAt(0),a="0".charCodeAt(0),u="a".charCodeAt(0),f="A".charCodeAt(0),c="-".charCodeAt(0),d="_".charCodeAt(0);e.toByteArray=n,e.fromByteArray=i}("undefined"==typeof n?this.base64js={}:n)}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/..\\node_modules\\gulp-browserify\\node_modules\\browserify\\node_modules\\buffer\\node_modules\\base64-js\\lib\\b64.js","/..\\node_modules\\gulp-browserify\\node_modules\\browserify\\node_modules\\buffer\\node_modules\\base64-js\\lib")},{VCmEsw:4,buffer:1}],3:[function(e,t,n){(function(e,t,i,r,s,o,a,u,f){n.read=function(e,t,n,i,r){var s,o,a=8*r-i-1,u=(1<<a)-1,f=u>>1,l=-7,c=n?r-1:0,d=n?-1:1,h=e[t+c];for(c+=d,s=h&(1<<-l)-1,h>>=-l,l+=a;l>0;s=256*s+e[t+c],c+=d,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=i;l>0;o=256*o+e[t+c],c+=d,l-=8);if(0===s)s=1-f;else{if(s===u)return o?NaN:(h?-1:1)*(1/0);o+=Math.pow(2,i),s-=f}return(h?-1:1)*o*Math.pow(2,s-i)},n.write=function(e,t,n,i,r,s){var o,a,u,f=8*s-r-1,l=(1<<f)-1,c=l>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,h=i?0:s-1,p=i?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),t+=o+c>=1?d/u:d*Math.pow(2,1-c),t*u>=2&&(o++,u/=2),o+c>=l?(a=0,o=l):o+c>=1?(a=(t*u-1)*Math.pow(2,r),o+=c):(a=t*Math.pow(2,c-1)*Math.pow(2,r),o=0));r>=8;e[n+h]=255&a,h+=p,a/=256,r-=8);for(o=o<<r|a,f+=r;f>0;e[n+h]=255&o,h+=p,o/=256,f-=8);e[n+h-p]|=128*y}}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/..\\node_modules\\gulp-browserify\\node_modules\\browserify\\node_modules\\buffer\\node_modules\\ieee754\\index.js","/..\\node_modules\\gulp-browserify\\node_modules\\browserify\\node_modules\\buffer\\node_modules\\ieee754")},{VCmEsw:4,buffer:1}],4:[function(e,t,n){(function(e,n,i,r,s,o,a,u,f){function l(){}var e=t.exports={};e.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var i=n.shift();i()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),e.title="browser",e.browser=!0,e.env={},e.argv=[],e.on=l,e.addListener=l,e.once=l,e.off=l,e.removeListener=l,e.removeAllListeners=l,e.emit=l,e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")}}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/..\\node_modules\\gulp-browserify\\node_modules\\browserify\\node_modules\\process\\browser.js","/..\\node_modules\\gulp-browserify\\node_modules\\browserify\\node_modules\\process")},{VCmEsw:4,buffer:1}],5:[function(e,t,n){(function(e,n,i,r,s,o,a,u,f){t.exports={isDebugging:!1,log:function(e){this.isDebugging&&console.log(e)},display:{},render:function(e){if(this.isDebugging){var t=40;for(var n in this.display){var i=this.display[n];e.drawText(20,t,n+": "+i),t+=20}}}}}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/Debug.js","/")},{VCmEsw:4,buffer:1}],6:[function(e,t,n){(function(e,n,i,r,s,o,a,u,f){function l(e){return this._useBuffer?e.response:this._json?JSON.parse(e.responseText):e.responseText}t.exports={freeze:function(e){var t={};for(var n in e)Object.defineProperty(t,n,{writeable:!1,enumerable:!0,value:e[n]});return t},Ajax:{get:function(e){return new c("GET",e)},getBuffer:function(e){var t=new c("GET",e);return t.useBuffer(!0),t},post:function(e){return new c("POST",e)}}};var c=function(e,t){this._requestMethod=e,this._requestUrl=t,this._failCallback=function(){},this._successCallback=function(){}};c.prototype.onSuccess=function(e){return this._successCallback=e,this},c.prototype.onFail=function(e){return this._failCallback=e,this},c.prototype.json=function(){return this._json=!0,this},c.prototype.useBuffer=function(e){this._useBuffer=e},c.prototype.send=function(){var e=new XMLHttpRequest,t=this;this._useBuffer&&(e.responseType="arraybuffer"),e.onload=function(){if(200===e.status||302===e.status){var n=l.call(t,e);t._successCallback(n)}else t._failCallback(e.status,e.responseText)},e.open(this._requestMethod,this._requestUrl,!0),e.send()}}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/Util.js","/")},{VCmEsw:4,buffer:1}],7:[function(e,t,n){(function(n,i,r,s,o,a,u,f,l){function c(e,t,n,i){p.Ajax.getBuffer(n).onSuccess(function(n){e.context.decodeAudioData(n,function(n){t[i]=n,d(t)&&e.complete(t)})}).send()}function d(e){var t=e.reduce(function(e,t){var n=t?0:1;return e+n},0);return!(t>0)}function h(e){for(var t=[],n=0;n<e;n++)t.push(!1);return t}var p=e("../Util");t.exports={load:function(e){var t=h(e.files.length);e.files.forEach(function(n,i){c(e,t,n,i)})}}}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/engine\\AudioBufferLoader.js","/engine")},{"../Util":6,VCmEsw:4,buffer:1}],8:[function(e,t,n){(function(e,n,i,r,s,o,a,u,f){var l=null;try{l=window.AudioContext||window.webkitAudioContext}catch(c){throw new Error("Web Audio API is not supported in this browser")}t.exports=l}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/engine\\AudioContext.js","/engine")},{VCmEsw:4,buffer:1}],9:[function(e,t,n){(function(e,n,i,r,s,o,a,u,f){t.exports=function(){var e=function(e){this._time=e.time,this._config=e.config,this._lastFrame=0};return e.prototype.getInterval=function(){var e=this._time.getCurrentTime(),t=e-this._lastFrame,n=t/(1e3/this._config.fps);return this._lastFrame=e,n=Math.min(10,n),{delta:n,milliseconds:t}},e}()}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/engine\\Delta.js","/engine")},{VCmEsw:4,buffer:1}],10:[function(e,t,n){(function(n,i,r,s,o,a,u,f,l){function c(e,t){if(e.length!==t.length)throw new Error("Audio buffer count mismatch. Expected "+e.length+" but got"+t.length);this.buffers=[];for(var n=0;n<e.length;n++)this.buffers[e[n]]=t[n]}function d(){return[w.EXPLOSION,w.WEAPON_FIRE]}function h(e,t){return t.map(function(t){return e+t+".wav"})}var p=e("./AudioBufferLoader"),y=e("./AudioContext"),w=e("../subsystems/fx/AudioFx"),m=function(e){this.audioContext=new y;var t=this,n=d();p.load({context:this.audioContext,files:h(e.basePath,n),complete:function(e){c.call(t,n,e)}})};m.prototype.play=function(e){var t=this.audioContext.createBufferSource();t.buffer=this.buffers[e],t.connect(this.audioContext.destination),t.start()},t.exports=m}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/engine\\GameAudio.js","/engine")},{"../subsystems/fx/AudioFx":30,"./AudioBufferLoader":7,"./AudioContext":8,VCmEsw:4,buffer:1}],11:[function(e,t,n){(function(e,n,i,r,s,o,a,u,f){t.exports=function(){var e=function(e,t){Object.defineProperties(this,{type:{writeable:!1,get:function(){return e}},data:{writeable:!1,get:function(){return t}}})};return e}()}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/engine\\GameEvent.js","/engine")},{VCmEsw:4,buffer:1}],12:[function(e,t,n){(function(n,i,r,s,o,a,u,f,l){function c(e){this._pendingEvents.push(e)}function d(e,t){this._subscribers[e]||(this._subscribers[e]=[]),this._subscribers[e].push(t)}function h(e,t){var n=this._subscribers[e],i=n.indexOf(t);i!==-1&&n.splice(i,1)}function p(){var e=this;allEvents=e._pendingEvents,e._pendingEvents=[],allEvents.forEach(function(t){var n=e._subscribers[t.type];n&&n.forEach(function(e){e(t)})})}var y=(e("../Debug"),function(){this._pendingEvents=[],this._subscribers={},this.process=p.bind(this),this.subscribe=d.bind(this),this.unsubscribe=h.bind(this),this.addEvent=c.bind(this)});t.exports=y}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/engine\\GameEventHandler.js","/engine")},{"../Debug":5,VCmEsw:4,buffer:1}],13:[function(e,t,n){(function(n,i,r,s,o,a,u,f,l){e("../Debug");t.exports=function(){function e(){for(var e=new Array(255),t=0;t<e.length;t++)e[t]=!1;return e}function t(e){this._keyStates[e.keyCode]=!1,i(e)}function n(e){this._keyStates[e.keyCode]=!0,i(e)}function i(e){s.indexOf(e.keyCode)!==-1&&e.preventDefault()}var r=function(){this._keyStates=e(),document.addEventListener("keyup",t.bind(this)),document.addEventListener("keydown",n.bind(this))};r.prototype.isPressed=function(e){return this._keyStates[e]},Object.defineProperties(r,{LEFT:{value:37,enumerable:!0},UP:{value:38,enumerable:!0},RIGHT:{value:39,enumerable:!0},DOWN:{value:40,enumerable:!0},SPACEBAR:{value:32,enumerable:!0}});var s=[37,38,39,40,32];return r}()}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/engine\\GameInput.js","/engine")},{"../Debug":5,VCmEsw:4,buffer:1}],14:[function(e,t,n){(function(e,n,i,r,s,o,a,u,f){t.exports=function(){var e=function(e){this._canvasContext=e,this._color="#FFFFFF",this._font="12px monospace",this._canvasContext.fillStyle=this._color,this._canvasContext.strokeStyle=this._color,this._canvasContext.font=this._font};return e.prototype.setColor=function(e){this._color=e},e.prototype.setFont=function(e){this._font=e},e.prototype.drawText=function(e,t,n){this._canvasContext.fillStyle=this._color,this._canvasContext.font=this._font,this._canvasContext.fillText(n,e,t)},e.prototype.fillRectangle=function(e,t,n,i){this._canvasContext.fillStyle=this._color,this._canvasContext.fillRect(e,t,n,i)},e.prototype.drawLine=function(e,t,n,i){this._canvasContext.strokeStyle=this._color,this._canvasContext.beginPath(),this._canvasContext.moveTo(e,t),this._canvasContext.lineTo(n,i),this._canvasContext.stroke()},e.prototype.clearCanvas=function(e){this._canvasContext.fillStyle=e;var t=this._canvasContext.canvas.width,n=this._canvasContext.canvas.height;this._canvasContext.fillRect(0,0,t,n)},e}()}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/engine\\Renderer.js","/engine")},{VCmEsw:4,buffer:1}],15:[function(e,t,n){(function(n,i,r,s,o,a,u,f,l){var c=e("../Debug"),d=e("./Delta"),h=e("./Time"),p=e("./SubsystemManager"),y=e("./Renderer"),w=e("./GameInput"),m=e("./GameAudio"),b=e("./GameEventHandler"),g=e("./GameEvent");t.exports=function(){function e(e){return new d({time:new h,config:{fps:e.fps}})}function t(e){var t=this._subsystemManager;if(e){var n=o.call(this,{delta:1,milliseconds:0});e.forEach(function(e){e.initialize(n),t.addSubsystem(e)})}}function n(){var e=new g("engine-start",null);this._eventHandler.addEvent(e)}function i(e){var t=document.getElementById(e);return t?t.getContext("2d"):{width:0,height:0}}function r(){var e=this._delta.getInterval(),t=o.call(this,e);s(t),this._eventHandler.process(),this._subsystemManager.update(t),this._renderer.clearCanvas("#000000"),this._subsystemManager.render(this._renderer),c.display.frametime=e.milliseconds,c.render(this._renderer)}function s(e){e.input.isPressed(220)&&(c.isDebugging=!c.isDebugging)}function o(e){var t=this._canvas.canvas.width,n=this._canvas.canvas.height;return{delta:e.delta,timeSinceLastFrame:e.milliseconds,input:this._input,audio:this._audio,display:{width:t,height:n},events:{emit:this._eventHandler.addEvent,subscribe:this._eventHandler.subscribe,unsubscribe:this._eventHandler.unsubscribe}}}var a=function(r){this._delta=e(r),this._subsystemManager=new p,this._input=new w,this._audio=new m({basePath:r.audioPath}),this._canvas=i(r.canvas),this._renderer=new y(this._canvas),this._eventHandler=new b,t.call(this,r.subsystems),n.call(this)};return a.prototype.start=function(){window.setInterval(r.bind(this),1e3/60)},a}()}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/engine\\SpaceEngine.js","/engine")},{"../Debug":5,"./Delta":9,"./GameAudio":10,"./GameEvent":11,"./GameEventHandler":12,"./GameInput":13,"./Renderer":14,"./SubsystemManager":16,"./Time":17,VCmEsw:4,buffer:1}],16:[function(e,t,n){(function(e,n,i,r,s,o,a,u,f){t.exports=function(){var e=function(){this._subsystems=[]};return e.prototype.addSubsystem=function(e){this._subsystems.push(e)},e.prototype.update=function(e){this._subsystems.forEach(function(t){t.update(e)})},e.prototype.render=function(e){this._subsystems.forEach(function(t){t.render(e)})},e}()}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/engine\\SubsystemManager.js","/engine")},{VCmEsw:4,buffer:1}],17:[function(e,t,n){(function(e,n,i,r,s,o,a,u,f){t.exports=function(){var e=function(){};return e.prototype.getCurrentTime=function(){return(new Date).getTime()},e}()}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/engine\\Time.js","/engine")},{VCmEsw:4,buffer:1}],18:[function(e,t,n){(function(t,n,i,r,s,o,a,u,f){console.log("Loading....");var l=e("./game/SpaceRocks");window.SpaceRocks=l}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_7014907c.js","/")},{"./game/SpaceRocks":20,VCmEsw:4,buffer:1}],19:[function(e,t,n){(function(n,i,r,s,o,a,u,f,l){function c(e){var t=new E("loading");return t.addEventHandler("engine-start",function(t){e.changeState("start-screen")}),t}function d(e,t){var n=new E("start-screen");return n.update=function(t){var n=t.input.isPressed(b.SPACEBAR);n&&(e.changeState("play"),t.events.emit(new g("score-change",{score:0})),t.events.emit(new g("player-life-change",{lives:3})),t.events.emit(new g("new-game",{})))},n}function h(e){function t(){o.asteroidCount=0,o.currentLevelNumber=0,o.levelHasEnded=!1,o.currentScore=0,o.playerLives=3,o.playerIsAlive=!0,o.playerRespawnTimer=0}function n(t,n){var i=t(n),r=t(n);e.entitySubsystem.addEntity(i,v.ASTEROID),e.entitySubsystem.addEntity(r,v.ASTEROID)}function i(t){
o.playerIsAlive||(o.playerRespawnTimer-=t.timeSinceLastFrame,o.playerRespawnTimer<=0&&(e.playerSubsystem.respawnPlayer(),o.playerIsAlive=!0))}function r(e){0!==o.asteroidCount||o.levelHasEnded||(o.levelHasEnded=!0,o.currentLevelNumber++,e.events.emit(new g("new-level",{levelNumber:o.currentLevelNumber})))}var s=new E("play"),o={};return t(),s.addEventHandler("entity-added",function(e){p(e.data.type)&&(o.levelHasEnded=!1,o.asteroidCount++)}),s.addEventHandler("new-game",function(n){t(),e.playerSubsystem.respawnPlayer(),s._gameContainer.events.emit(new g("score-change",{score:o.currentScore})),s._gameContainer.events.emit(new g("player-life-change",{lives:o.playerLives}))}),s.addEventHandler("new-level",function(t){for(var n=0;n<5;n++){var i=e.entityFactory.buildLargeAsteroid(s._gameContainer.display);e.entitySubsystem.addEntity(i,v.ASTEROID)}}),s.addEventHandler("entity-death",function(t){p(t.data.type)?("asteroid-large"===t.data.type?(o.currentScore+=25,n(e.entityFactory.buildMediumAsteroid,t.data.position)):"asteroid-medium"===t.data.type?(o.currentScore+=35,n(e.entityFactory.buildSmallAsteroid,t.data.position)):"asteroid-small"===t.data.type&&(o.currentScore+=50),o.asteroidCount--,s._gameContainer.events.emit(new g("score-change",{score:o.currentScore}))):y(t.data.type)&&(o.playerLives--,s._gameContainer.events.emit(new g("player-life-change",{lives:o.playerLives})),o.playerIsAlive=!1,o.playerRespawnTimer=5e3,o.playerLives<=0&&e.stateManager.changeState("game-over"))}),s.addUpdate(i),s.addUpdate(r),s.addUpdate(function(){m.display.asteroids=o.asteroidCount}),s}function p(e){return"asteroid-large"===e||"asteroid-medium"===e||"asteroid-small"===e}function y(e){return"player"===e}function w(e){var t=new E("game-over");return t.addUpdate(function(t){var n=t.input.isPressed(b.SPACEBAR);n&&e.changeState("start-screen")}),t}var m=e("../Debug"),b=e("../engine/GameInput"),g=e("../engine/GameEvent"),v=e("../subsystems/entities/CollisionManager");t.exports={buildLoadingState:function(e){return c(e)},buildStartScreen:function(e,t){return d(e,t)},buildPlayState:function(e){return h(e)},buildGameOverState:function(e){return w(e)}};var E=function(e){this._subscribers=[],this._updateHandlers=[],Object.defineProperties(this,{name:{enumerable:!0,value:e}})};E.prototype.addEventHandler=function(e,t){this._subscribers.push({type:e,handler:t})},E.prototype.load=function(e){this._gameContainer=e,this._subscribers.forEach(function(t){e.events.subscribe(t.type,t.handler)})},E.prototype.addUpdate=function(e){this._updateHandlers.push(e)},E.prototype.unload=function(e){this._subscribers.forEach(function(t){e.events.unsubscribe(t.type,t.handler)})},E.prototype.update=function(e){this._updateHandlers.forEach(function(t){t(e)})}}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/game\\GameStateBuilder.js","/game")},{"../Debug":5,"../engine/GameEvent":11,"../engine/GameInput":13,"../subsystems/entities/CollisionManager":24,VCmEsw:4,buffer:1}],20:[function(e,t,n){(function(n,i,r,s,o,a,u,f,l){function c(){var e=new b,t=new m({entitySubsystem:e,time:new h,playerWeaponDelay:250}),n=d(e,t),i=new v(e),r=new E;return[n,t,e,i,r]}function d(e,t){var n=new y,i=w.buildLoadingState(n),r=w.buildStartScreen(n,t),s=w.buildGameOverState(n),o=w.buildPlayState({stateManager:n,entityFactory:g,entitySubsystem:e,playerSubsystem:t});return n.addState(i),n.addState(r),n.addState(o),n.addState(s),n}var h=e("../engine/Time"),p=e("../engine/SpaceEngine"),y=e("../subsystems/state/StateManager"),w=e("./GameStateBuilder"),m=e("../subsystems/PlayerSubsystem"),b=e("../subsystems/entities/EntitySubsystem"),g=e("../subsystems/entities/EntityFactory"),v=e("../subsystems/fx/EffectsSubsystem"),E=e("../subsystems/UserInterface"),_=function(e){var t=c();new p({fps:30,audioPath:"audio/",canvas:e,subsystems:t}).start()};t.exports=_}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/game\\SpaceRocks.js","/game")},{"../engine/SpaceEngine":15,"../engine/Time":17,"../subsystems/PlayerSubsystem":21,"../subsystems/UserInterface":22,"../subsystems/entities/EntityFactory":26,"../subsystems/entities/EntitySubsystem":27,"../subsystems/fx/EffectsSubsystem":31,"../subsystems/state/StateManager":32,"./GameStateBuilder":19,VCmEsw:4,buffer:1}],21:[function(e,t,n){(function(n,i,r,s,o,a,u,f,l){function c(e){var t=e.input;if(t.isPressed(g.LEFT)&&(this._player.rotation-=v),t.isPressed(g.RIGHT)&&(this._player.rotation+=v),t.isPressed(g.UP)){var n=this._player.velocity,i=h(this._player.rotation);this._player.velocity=n.translate(i);e.events.emit(new b("player-thrust",{direction:new m(0,1).rotate(this._player.rotation),position:this._player.position}))}if(t.isPressed(g.DOWN)){var n=this._player.velocity,i=h(this._player.rotation);i=new m(n.x-i.x,n.y-i.y);this._player.velocity=i;e.events.emit(new b("player-thrust",{direction:new m(0,(-1)).rotate(this._player.rotation),position:this._player.position}))}}function d(e){if(e.input.isPressed(g.SPACEBAR)){var t=this._timer.getCurrentTime(),n=t-this._lastWeaponDischarge;if(n>=this._playerWeaponDelay){this._lastWeaponDischarge=t;var i=this._player.position,r=new m(0,_).rotate(this._player.rotation),s=y.buildBullet(i,r);this._entitySubsystem.addEntity(s,w.BULLETS),e.events.emit(new b("player-fire",{position:i,velocity:r}))}}}function h(e){var t=new m(0,E);return t.rotate(e)}function p(){return y.buildPlayer(new m(320,240))}var y=(e("../Debug"),e("./entities/EntityFactory")),w=e("./entities/CollisionManager"),m=e("./entities/Point"),b=e("../engine/GameEvent"),g=e("../engine/GameInput"),v=(e("../Debug"),5),E=.125,_=5,C=function(e){this._entitySubsystem=e.entitySubsystem,this._timer=e.time,this._playerWeaponDelay=e.playerWeaponDelay,this._lastWeaponDischarge=e.time.getCurrentTime()};C.prototype.initialize=function(e){},C.prototype.respawnPlayer=function(){var e=this._player,t=p();this._entitySubsystem.addEntity(t,w.PLAYER),e&&this._entitySubsystem.removeEntity(e),this._player=t},C.prototype.render=function(){},C.prototype.update=function(e){this._player&&this._player.isAlive&&(c.call(this,e),d.call(this,e))},t.exports=C}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/subsystems\\PlayerSubsystem.js","/subsystems")},{"../Debug":5,"../engine/GameEvent":11,"../engine/GameInput":13,"./entities/CollisionManager":24,"./entities/EntityFactory":26,"./entities/Point":28,VCmEsw:4,buffer:1}],22:[function(e,t,n){(function(e,n,i,r,s,o,a,u,f){function l(e){return function(e){this._score=e.data.score}.bind(this)}function c(e){return function(e){this._lives=e.data.lives}.bind(this)}function d(e){return function(e){this._displayStartMessage=!0}.bind(this)}function h(e){return function(e){this._displayGameOver=!1}.bind(this)}function p(e){return function(e){this._displayStartMessage=!1,this._level=e.data.levelNumber}.bind(this)}function y(e){return function(e){"state-change"===e.type&&"game-over"==e.data.state&&(this._displayGameOver=!0)}.bind(this)}var w=function(){this._score=0,this._lives=0,this._level=0,this._displayStartMessage=!0,this._displayGameOver=!1};w.prototype.initialize=function(e){var t=e.events.subscribe;t("score-change",l.call(this,e)),t("player-life-change",c.call(this,e)),t("game-reset",d.call(this,e)),t("new-level",p.call(this,e)),t("new-game",h.call(this,e)),t("state-change",y.call(this,e))},w.prototype.update=function(e){},w.prototype.render=function(e){e.setFont("12px atari"),e.drawText(10,20,"SCORE: "+this._score),e.drawText(250,20,"LEVEL: "+this._level),e.drawText(500,20,"LIVES: "+this._lives),this._displayStartMessage&&(e.setFont("16px atari"),e.drawText(300,300,"PRESS SPACE TO START")),this._displayGameOver&&(e.setFont("16px atari"),e.drawText(250,250,"GAME OVER"))},t.exports=w}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/subsystems\\UserInterface.js","/subsystems")},{VCmEsw:4,buffer:1}],23:[function(e,t,n){(function(n,i,r,s,o,a,u,f,l){var c=e("./Point"),d=function(e,t){if(e.x>t.x||e.y>t.y){var n=Math.min(e.x,t.x),i=Math.min(e.y,t.y),r=Math.max(e.x,t.x),s=Math.max(e.y,t.y);e=new c(n,i),t=new c(r,s)}this.string="[min: "+e.toString()+", max: "+t.toString()+"]",Object.defineProperties(this,{min:{writeable:!1,enumerable:!0,value:e},max:{writeable:!1,enumerable:!0,value:t}})};d.prototype.intersects=function(e){if(!(e&&e instanceof d))throw new Error("Intersect cannot be calculated on a non-BoundingBox object");return!(e.max.x<this.min.x)&&(!(e.min.x>this.max.x)&&(!(e.max.y<this.min.y)&&!(e.min.y>this.max.y)))},t.exports=d}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/subsystems\\entities\\BoundingBox.js","/subsystems\\entities")},{"./Point":28,VCmEsw:4,buffer:1}],24:[function(e,t,n){(function(e,n,i,r,s,o,a,u,f){function l(e){this._entities[e.id]={id:e.id,mask:e.mask,members:[]}}function c(){var e=this._entities;return Object.getOwnPropertyNames(e).map(function(t){return e[t]})}function d(e,t){if(e===t)return!1;var n=1===e.mask[t.id],i=1===t.mask[e.id];return n&&i}function h(e,t,n){t.members.forEach(function(t){n.members.forEach(function(n){if(t.isAlive&&n.isAlive){var i=t.shape,r=n.shape;i.boundingBox.intersects(r.boundingBox)&&i.intersects(r)&&(t.destroy(e),n.destroy(e))}})})}function p(){c.call(this).forEach(function(e){e.members=e.members.filter(y)})}function y(e){return e.isAlive}var w={id:0,mask:[0,1,1,1]},m={id:1,mask:[1,0,1,1]},b={id:2,mask:[0,1,0,1]},g={id:3,mask:[0,0,0,0]},v=function(){this._entities={},l.call(this,w),l.call(this,m),l.call(this,b),l.call(this,g)};v.prototype.add=function(e,t){this._entities[t]&&this._entities[t].members.push(e)},v.prototype.remove=function(e){c.call(this).forEach(function(t){var n=t.members.indexOf(e);if(n!==-1)return void t.members.splice(n,1)})},v.prototype.update=function(e){p.call(this);var t=(this._entities,c.call(this));t.forEach(function(n){t.forEach(function(t){d(n,t)&&h(e,n,t)})})},Object.defineProperties(v,{PLAYER:{value:w.id,writeable:!1,enumerable:!0},ASTEROID:{value:m.id,writeable:!1,enumerable:!0},BULLETS:{value:b.id,writeable:!1,enumerable:!0},FX:{value:g.id,writeable:!1,enumerable:!0}}),t.exports=v}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/subsystems\\entities\\CollisionManager.js","/subsystems\\entities")},{VCmEsw:4,buffer:1}],25:[function(e,t,n){(function(n,i,r,s,o,a,u,f,l){var c=e("./Point"),d=e("../../engine/GameEvent");e("../../Debug");t.exports=function(){function e(e){var t=this;this._behaviors.forEach(function(n){n(e,t)})}var t=function(e,t){this._shape=e,this._type=t,this._behaviors=[],this._isAlive=!0,this.position=new c(0,0),this.velocity=new c(0,0);var n=this;Object.defineProperties(n,{rotation:{enumerable:!0,writeable:!0,get:function(){return n._shape.rotation},set:function(e){n._shape.rotation=e}},position:{enumerable:!0,writeable:!0,get:function(){return n._shape.position},set:function(e){n._shape.position=e}},isAlive:{enumerable:!0,writeable:!0,get:function(){return n._isAlive},set:function(){throw new Error("Illegal operation, do not set isAlive directly, call Entity.destroy() instead.")}},shape:{value:e,writeable:!1,enumerable:!0},type:{value:t,writeable:!1,enumerable:!0}}),this.rotation=0};return t.prototype.render=function(e){this._shape.render(e)},t.prototype.update=function(t){e.call(this,t);var n=this.velocity.x*t.delta,i=this.velocity.y*t.delta;this.position=this.position.translate({x:n,y:i})},t.prototype.destroy=function(e){this._isAlive=!1,e.events.emit(new d("entity-death",{type:this._type,position:this.position}))},t.prototype.addBehavior=function(e){this._behaviors.push(e)},t}()}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/subsystems\\entities\\Entity.js","/subsystems\\entities")},{"../../Debug":5,"../../engine/GameEvent":11,"./Point":28,VCmEsw:4,buffer:1}],26:[function(e,t,n){(function(n,i,r,s,o,a,u,f,l){function c(e,t){var n=new v(new E([new _(0,0),new _(1,0)]),"bullet");n.position=e,n.velocity=t;var i=30;return n.addBehavior(function(e,t){i-=e.delta,i<=0&&t.destroy(e)}),n}function d(e){var t=new v(new E([new _((-5),(-5)),new _(0,(-5)),new _(5,(-5)),new _(0,5)]),"player");return t.position=e,t}function h(e){var t=new v(new E([new _((-8),(-10)),new _(6,(-11)),new _(15,(-5)),new _(14,(-2)),new _(4,0),new _(14,7),new _(7,13),new _((-1),9),new _((-9),13),new _((-17),3),new _((-16),(-4)),new _((-4),(-4))]),"asteroid-medium");return t.position=new _(e.x,e.y),w(t,1.5),m(t),t}function p(e){var t=new v(new E([new _(9,3),new _(4,8),new _((-2),5),new _((-5),7),new _((-8),2),new _((-5),1),new _((-7),(-3)),new _((-3),(-6)),new _(0,(-3)),new _(4,(-5)),new _(7,(-3)),new _(4,0)]),"asteroid-small");return t.position=new _(e.x,e.y),w(t,2),m(t),t}function y(e){var t=new v(new E([new _((-10),(-24)),new _(15,(-24)),new _(29,(-7)),new _(30,5),new _(15,21),new _((-1),20),new _((-1),3),new _((-15),20),new _((-30),4),new _((-17),(-2)),new _((-30),(-8))]),"asteroid-large");Math.random()*e.width,Math.random()*e.height;return t.position=new _(0,0),w(t,1),m(t),t}function w(e,t){var n=Math.random()*t*2-t,i=Math.random()*t*2-t;e.velocity=new _(n,i)}function m(e){var t=2*Math.random()-1;e.addBehavior(function(e,n){n.rotation+=t})}function b(e){for(var t=[],n=0;n<e.count;n++){var i=new v(new E([new _(0,0),new _(1,0)]),"fx");i.position=e.position,i.velocity=g(e);var r=0;i.addBehavior(function(t,n){r+=t.delta,r>e.duration&&n.destroy(t)}),t.push(i)}return t}function g(e){if(e.maxForce&&e.minForce){var t=Math.random()*(e.maxForce-e.minForce)+e.minForce;return new _(0,t).rotate(360*Math.random())}if(e.direction&&e.directionalSpread){var n=e.directionalSpread,i=e.direction.magnitude();return e.direction.normalize().scale(Math.random()*i).rotate(Math.random()*n*2-n)}}var v=e("./Entity"),E=e("./Shape"),_=e("./Point"),C=(e("../../Debug"),{});Object.defineProperties(C,{buildBullet:{value:c,writeable:!1,enumerable:!0},buildPlayer:{value:d,writeable:!1,enumerable:!0},buildLargeAsteroid:{value:y,writeable:!1,enumerable:!0},buildMediumAsteroid:{value:h,writeable:!1,enumerable:!0},buildSmallAsteroid:{value:p,writeable:!1,enumerable:!0},buildParticles:{value:b,writeable:!1,enumerable:!0}}),t.exports=C}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/subsystems\\entities\\EntityFactory.js","/subsystems\\entities")},{"../../Debug":5,"./Entity":25,"./Point":28,"./Shape":29,VCmEsw:4,buffer:1}],27:[function(e,t,n){(function(n,i,r,s,o,a,u,f,l){function c(e,t){var n=e.position;e.position.x<0&&(n=new d(t.width,n.y)),e.position.x>t.width&&(n=new d(0,n.y)),e.position.y<0&&(n=new d(n.x,t.height)),e.position.y>t.height&&(n=new d(n.x,0)),e.position=n}var d=(e("../../Debug"),e("./Point")),h=e("./CollisionManager"),p=e("../../engine/GameEvent"),y=(e("../../Debug"),function(){this._entities=[],this._collisionManager=new h});y.prototype.render=function(e){this._entities.forEach(function(t){t.render(e)})},y.prototype.update=function(e){this._collisionManager.update(e),this._entities=this._entities.filter(function(e){return e.isAlive}),this._entities.forEach(function(t){c(t,e.display),t.update(e)})},y.prototype.initialize=function(e){this._gameContainer=e,e.events.subscribe("new-game",function(){this._entities=[]}.bind(this))};var w=1;y.prototype.addEntity=function(e,t){e.id=w++,this._entities.push(e),this._collisionManager.add(e,t),this._gameContainer.events.emit(new p("entity-added",{type:e.type}))},y.prototype.removeEntity=function(e){var t=this._entities.indexOf(e);t!==-1&&(this._collisionManager.remove(e),this._entities.splice(t,1),this._gameContainer.events.emit(new p("entity-removed",{type:e.type})))},t.exports=y}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/subsystems\\entities\\EntitySubsystem.js","/subsystems\\entities")},{"../../Debug":5,"../../engine/GameEvent":11,"./CollisionManager":24,"./Point":28,VCmEsw:4,buffer:1}],28:[function(e,t,n){(function(e,n,i,r,s,o,a,u,f){t.exports=function(){var e='The Point object is immutable. Use a transformation method like "translate".',t=function(t,n){Object.defineProperties(this,{x:{get:function(){return t},set:function(){throw new Error(e)}},y:{get:function(){return n},set:function(){throw new Error(e)}}})};return t.prototype.translate=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.scale=function(e){return new t(this.x*e,this.y*e)},t.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.normalize=function(){var e=this.magnitude(),n=this.x/e,i=this.y/e;return new t(n,i)},t.prototype.rotate=function(e){var n=e*Math.PI/180,i=Math.cos(n)*this.x-Math.sin(n)*this.y,r=Math.sin(n)*this.x+Math.cos(n)*this.y;return new t(i,r)},t.prototype.toString=function(){return"Point("+this.x+", "+this.y+")"},t}()}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/subsystems\\entities\\Point.js","/subsystems\\entities")},{VCmEsw:4,buffer:1}],29:[function(e,t,n){(function(n,i,r,s,o,a,u,f,l){function c(e){var t=Number.MAX_VALUE,n=Number.MAX_VALUE,i=Number.MIN_VALUE,r=Number.MIN_VALUE;return e.forEach(function(e){t=e.x<t?e.x:t,n=e.y<n?e.y:n,i=e.x>i?e.x:i,r=e.y>r?e.y:r}),new p(new h(t,n),new h(i,r))}function d(e,t,n){e.drawLine(t.x,t.y,n.x,n.y)}var h=e("./Point"),p=e("./BoundingBox"),y=function(e){this._points=e,this.color="#ffffff",Object.defineProperties(this,{boundingBox:{writeable:!0,enumerable:!0,get:function(){return c(this.getPoints())},set:function(){}}})};y.prototype.rotation=0,y.prototype.position=new h(0,0),y.prototype.getPoints=function(){var e=this.position,t=this.rotation,n=this._points.map(function(n){n=n.rotate(t);var i=n.x+e.x,r=n.y+e.y;return new h(i,r)});return n},y.prototype.contains=function(e){var t=this.getPoints(),n=this._points.length,i=e.x,r=e.y;if(isNaN(i)||isNaN(r)||void 0===i||void 0===r||null===i||null===r)return!1;for(var s=!1,o=0,a=n-1;o<n;a=o++){var u=t[o].x,f=t[o].y,l=t[a].x,c=t[a].y,d=f>r!=c>r&&i<(l-u)*(r-f)/(c-f)+u;d&&(s=!s)}return s},y.prototype.intersects=function(e){if(!(e instanceof y))return!1;var t=!1,n=this,i=e.getPoints();return i.forEach(function(e){n.contains(e)&&(t=!0)}),t},y.prototype.render=function(e){e.setColor(this.color);for(var t,n,i=(this.position,this.getPoints()),r=i.length,s=0;s<r-1;s++)t=i[s],n=i[s+1],d(e,t,n);t=i[r-1],n=i[0],d(e,t,n)},t.exports=y}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/subsystems\\entities\\Shape.js","/subsystems\\entities")},{"./BoundingBox":23,"./Point":28,VCmEsw:4,buffer:1}],30:[function(e,t,n){(function(e,n,i,r,s,o,a,u,f){var l={};Object.defineProperties(l,{WEAPON_FIRE:{value:"asteroids-ship-fire",enumerable:!0,writeable:!1},EXPLOSION:{value:"cannon-boom4",enumerable:!0,writeable:!1}}),t.exports=l}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/subsystems\\fx\\AudioFx.js","/subsystems\\fx")},{VCmEsw:4,buffer:1}],31:[function(e,t,n){(function(n,i,r,s,o,a,u,f,l){function c(e){var t=this._entitySubsystem,n=h.buildParticles({count:4,position:e,duration:50,minForce:1,maxForce:3});n.forEach(function(e){t.addEntity(e,p.FX)})}var d=e("./AudioFx"),h=(e("../entities/Entity"),e("../entities/EntityFactory")),p=e("../entities/CollisionManager"),y=function(e){this._entitySubsystem=e};y.prototype.initialize=function(e){var t=this;e.events.subscribe("player-fire",function(t){e.audio.play(d.WEAPON_FIRE)}),e.events.subscribe("entity-death",function(n){var i=n.data.type;"asteroid-large"!==i&&"asteroid-medium"!==i&&"asteroid-small"!==i&&"player"!==i||(e.audio.play(d.EXPLOSION),c.call(t,n.data.position))}),e.events.subscribe("player-thrust",function(e){var n=e.data.direction.scale(-5),i=h.buildParticles({count:2,position:e.data.position,direction:n,directionalSpread:15,duration:5});i.forEach(function(e){t._entitySubsystem.addEntity(e)})})},y.prototype.update=function(){},y.prototype.render=function(){},t.exports=y}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/subsystems\\fx\\EffectsSubsystem.js","/subsystems\\fx")},{"../entities/CollisionManager":24,"../entities/Entity":25,"../entities/EntityFactory":26,"./AudioFx":30,VCmEsw:4,buffer:1}],32:[function(e,t,n){(function(n,i,r,s,o,a,u,f,l){function c(e){var t=this._states.filter(function(t){return t.name===e});if(0===t.length)throw new Error('Invalid game state "'+e+'" was requested.');return t[0]}var d=e("../../Debug"),h=e("../../engine/GameEvent"),p=(e("../entities/CollisionManager"),e("../entities/EntityFactory"),e("../entities/Entity"),e("../entities/Shape"),e("../entities/Point"),function(){this._states=[],this._gameContainer=null});p.prototype.addState=function(e){this._states.push(e)},p.prototype.initialize=function(e){this._currentState=this._states[0],this._currentState.load(e),this._gameContainer=e},p.prototype.changeState=function(e){var t=c.call(this,e);this._currentState.unload(this._gameContainer),t.load(this._gameContainer),this._currentState=t,d.display.state=e,this._gameContainer.events.emit(new h("state-change",{state:e}))},p.prototype.update=function(e){this._currentState.update(e)},p.prototype.render=function(e){},t.exports=p}).call(this,e("VCmEsw"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/subsystems\\state\\StateManager.js","/subsystems\\state")},{"../../Debug":5,"../../engine/GameEvent":11,"../entities/CollisionManager":24,"../entities/Entity":25,"../entities/EntityFactory":26,"../entities/Point":28,"../entities/Shape":29,VCmEsw:4,buffer:1}]},{},[18]);